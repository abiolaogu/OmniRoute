{{!-- Workflow Template for Temporal Go Code Generation --}}
// Generated by OmniRoute Workflow Compiler
// DO NOT EDIT - This file is auto-generated from workflow definition

package {{package_name}}

import (
    "go.temporal.io/sdk/workflow"
    "time"
)

// {{workflow_name}}Input defines the workflow input
type {{workflow_name}}Input struct {
{{#each variables}}
    {{pascal_case name}} {{go_type type}} `json:"{{name}}"`
{{/each}}
}

// {{workflow_name}}Output defines the workflow output
type {{workflow_name}}Output struct {
    Success bool   `json:"success"`
    Message string `json:"message"`
    Data    any    `json:"data,omitempty"`
}

// {{workflow_name}} is the main workflow function
func {{workflow_name}}(ctx workflow.Context, input {{workflow_name}}Input) (*{{workflow_name}}Output, error) {
    logger := workflow.GetLogger(ctx)
    logger.Info("{{workflow_name}} started", "input", input)
    
    // Default activity options
    ao := workflow.ActivityOptions{
        StartToCloseTimeout: 10 * time.Minute,
    }
    ctx = workflow.WithActivityOptions(ctx, ao)
    
{{#each nodes}}
{{#if (eq node_type "activity")}}
    // Execute {{label}} activity
    var {{snake_case label}}Result {{label}}Output
    err := workflow.ExecuteActivity(ctx, activities.{{label}}, {{label}}Input{}).Get(ctx, &{{snake_case label}}Result)
    if err != nil {
        logger.Error("{{label}} failed", "error", err)
        return nil, err
    }
{{/if}}
{{#if (eq node_type "decision")}}
    // Decision: {{label}}
    if {{condition}} {
        // True branch
    } else {
        // False branch
    }
{{/if}}
{{#if (eq node_type "wait_timer")}}
    // Wait for {{config.duration}}
    err := workflow.Sleep(ctx, {{config.duration}})
    if err != nil {
        return nil, err
    }
{{/if}}
{{/each}}
    
    logger.Info("{{workflow_name}} completed successfully")
    return &{{workflow_name}}Output{
        Success: true,
        Message: "Workflow completed successfully",
    }, nil
}
